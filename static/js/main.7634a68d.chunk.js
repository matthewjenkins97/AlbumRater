(this.webpackJsonpSpotifyAlbumRater=this.webpackJsonpSpotifyAlbumRater||[]).push([[0],{21:function(e,t,a){e.exports=a(40)},26:function(e,t,a){},27:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),i=(a(26),a(27),a(4)),l=a(5),u=a(1),s=a(8),m=a(7),d=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).trackNumber=0,n.addTrack=n.addTrack.bind(Object(u.a)(n)),n.removeTrack=n.removeTrack.bind(Object(u.a)(n)),n.calculateTrad=n.calculateTrad.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"calculateTrad",value:function(){for(var e=0,t=0,a=1;a<this.trackNumber+1;a++){var n=parseInt(document.getElementById("trackMinutes"+a).value),r=parseInt(document.getElementById("trackSeconds"+a).value),c=document.getElementById("trackApproval"+a).checked;if(isNaN(n)||isNaN(r))return void alert("Please fill any missing data.");if(n<0||r<0)return void alert("Minutes or seconds cannot be negative numbers.");if(r>=60)return void alert("Number of seconds cannot be greater than 60.");c&&(e+=60*parseInt(n),e+=parseInt(r)),t+=60*parseInt(n),t+=parseInt(r)}isNaN(Math.round(e/t))?document.getElementById("calculatedScoreTrad").innerHTML="":document.getElementById("calculatedScoreTrad").innerHTML="Album rating: ".concat(Math.round(e/t*10)/2," out of 5")}},{key:"addTrack",value:function(){this.trackNumber+=1;var e=document.createElement("li");e.id="track"+this.trackNumber,e.innerHTML="\n      <input id=trackMinutes".concat(this.trackNumber," type=number></input>\n      <input id=trackSeconds").concat(this.trackNumber," type=number></input>\n      <input id=trackApproval").concat(this.trackNumber," type=checkbox></input>\n    "),document.getElementById("trackList").append(e),this.forceUpdate()}},{key:"removeTrack",value:function(){if(this.trackNumber>0){var e="track"+this.trackNumber;document.getElementById(e).remove()}this.trackNumber=this.trackNumber>0?this.trackNumber-1:0,this.forceUpdate()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("ol",{id:"trackList"}),r.a.createElement("button",{onClick:this.addTrack},"+"),r.a.createElement("button",{onClick:this.removeTrack},"-"),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.calculateTrad},"Calculate!"),r.a.createElement("h3",{id:"calculatedScoreTrad"}))}}]),a}(r.a.Component),h=a(10),p=a.n(h),b=a(20),f=a(16),k=a(6),v=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).calculateSpotify=n.calculateSpotify.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"calculateSpotify",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r,c,o,i,l,u,s,m,d,h,f,k,v,E,y,g,S,T,w;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="https://dev-06brcesa.us.auth0.com/api/v2/users/",a="https://api.spotify.com/v1/search?",n="https://api.spotify.com/v1/albums/",r="https://api.spotify.com/v1/me/tracks/contains?",c=this.props.auth0,o=c.user,i=c.getAccessTokenSilently,document.getElementById("calculatedScoreSpotify").innerHTML="Loading rating...",""!==document.getElementById("album").value&&""!==document.getElementById("artist").value){e.next=9;break}return document.getElementById("calculatedScoreSpotify").innerHTML="Please fill in any missing data and try again.",e.abrupt("return");case 9:return e.next=11,i();case 11:return l=e.sent,e.next=14,fetch("".concat(t).concat(o.sub),{headers:{Authorization:"Bearer ".concat(l)}});case 14:return e.next=16,e.sent.json();case 16:return u=e.sent,console.log(u.accessToken),e.prev=18,s={q:"".concat(document.getElementById("album").value," ").concat(document.getElementById("artist").value),type:"album",limit:1},e.next=22,fetch("".concat(a).concat(new URLSearchParams(s)),{headers:{Authorization:"Bearer ".concat(u.accessToken)}});case 22:return e.next=24,e.sent.json();case 24:if(void 0!==(m=e.sent).albums.items[0]){e.next=28;break}return document.getElementById("calculatedScoreSpotify").innerHTML="Album not found.",e.abrupt("return");case 28:return d=m.albums.items[0].id,e.next=31,fetch("".concat(n).concat(d),{headers:{Authorization:"Bearer ".concat(u.accessToken)}});case 31:return e.next=33,e.sent.json();case 33:h=e.sent,f=[],k=Object(b.a)(h.tracks.items);try{for(k.s();!(v=k.n()).done;)E=v.value,f.push(E.id)}catch(p){k.e(p)}finally{k.f()}return s={ids:f},e.next=40,fetch("".concat(r).concat(new URLSearchParams(s)),{headers:{Authorization:"Bearer ".concat(u.accessToken)}});case 40:return e.next=42,e.sent.json();case 42:for(y=e.sent,g=0,S=0,T=h.tracks.items,w=0;w<T.length;w++)y[w]&&(g=g+=T[w].duration_ms),S+=T[w].duration_ms;isNaN(Math.round(g/S))?document.getElementById("calculatedScoreSpotify").innerHTML="":document.getElementById("calculatedScoreSpotify").innerHTML="Album rating: ".concat(Math.round(g/S*10)/2," out of 5"),e.next=54;break;case 50:e.prev=50,e.t0=e.catch(18),console.error(e.t0),document.getElementById("calculatedScoreSpotify").innerHTML="Something bad happened. Please logout and log in to refresh the authentication.";case 54:case"end":return e.stop()}}),e,this,[[18,50]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.auth0,t=e.isAuthenticated,a=e.logout,n=e.loginWithRedirect;return r.a.createElement("div",null,t?r.a.createElement("div",null,r.a.createElement("div",{style:{float:"left"}},r.a.createElement("label",{htmlFor:"artistname"},"Artist: "),r.a.createElement("input",{type:"text",id:"artist",name:"artistname"})),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("button",{onClick:function(){return a({returnTo:window.location.origin+window.location.pathname})}},"Logout")),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"left"}},r.a.createElement("label",{htmlFor:"albumname"},"Album: "),r.a.createElement("input",{type:"text",id:"album",name:"albumname"})),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.calculateSpotify},"Calculate!"),r.a.createElement("h3",{id:"calculatedScoreSpotify"})):r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return n()}},"Login")))}}]),a}(r.a.Component),E=Object(k.b)(v);var y=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Album Rater"),r.a.createElement("hr",null),r.a.createElement("div",{class:"grid-container"},r.a.createElement("div",{class:"grid-child"},r.a.createElement("div",{class:"grid-element"},r.a.createElement("h2",null,"Traditional"),r.a.createElement("p",null,"For each track on the album, type in its length in minutes and seconds, and whether you liked it or not. Your score will be automatically generated below the list."),r.a.createElement(d,null))),r.a.createElement("div",{class:"grid-child"},r.a.createElement("div",{class:"grid-element"},r.a.createElement("h2",null,"Spotify"),r.a.createElement(E,null)))),r.a.createElement("hr",null),r.a.createElement("p",null,"Made by ",r.a.createElement("a",{href:"http://matthewjenkins97.github.io"},"Matthew R. Jenkins")," in 2023. Application uses ",r.a.createElement("a",{href:"https://reactjs.org/"},"React")," and CSS from ",r.a.createElement("a",{href:"http://bettermotherfuckingwebsite.com/"},"bettermotherfuckingwebsite.com"),"."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=a(19);o.a.render(r.a.createElement(g.a,{basename:"/SpotifyAlbumRater"},r.a.createElement(k.a,{domain:"dev-06brcesa.us.auth0.com",clientId:"aExrjSgZXrCRZAcUVZ9Ol6w2P3nBkrue",redirectUri:window.location.origin+window.location.pathname,audience:"https://dev-06brcesa.us.auth0.com/api/v2/",scope:"read:current_user read:user_idp_tokens offline_access"},r.a.createElement(y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.7634a68d.chunk.js.map