(this.webpackJsonpSpotifyAlbumRater=this.webpackJsonpSpotifyAlbumRater||[]).push([[0],{21:function(e,t,a){e.exports=a(40)},26:function(e,t,a){},27:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),l=(a(26),a(27),a(6)),i=a.n(l),u=a(19),s=a(12),m=a(13),d=a(14),h=a(3),p=a(20),b=a(18),f=a(4),E=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).calculate=n.calculate.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"calculate",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n,r,c,o,l,s,m,d,h,p,b,f,E,g,v,y,k,w,S,x;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="https://dev-06brcesa.us.auth0.com/api/v2/users/",a="https://api.spotify.com/v1/search?",n="https://api.spotify.com/v1/albums/",r="https://api.spotify.com/v1/me/tracks/contains?",c=this.props.auth0,o=c.user,l=c.getAccessTokenSilently,document.getElementById("calculatedScore").innerHTML="Loading rating...",""!==document.getElementById("album").value&&""!==document.getElementById("artist").value){e.next=9;break}return document.getElementById("calculatedScore").innerHTML="Please fill in any missing data and try again.",e.abrupt("return");case 9:return e.next=11,l();case 11:return s=e.sent,e.next=14,fetch("".concat(t).concat(o.sub),{headers:{Authorization:"Bearer ".concat(s)}});case 14:return e.next=16,e.sent.json();case 16:return m=e.sent,e.prev=17,d={q:"".concat(document.getElementById("album").value," ").concat(document.getElementById("artist").value),type:"album",limit:1},e.next=21,fetch("".concat(a).concat(new URLSearchParams(d)),{headers:{Authorization:"Bearer ".concat(m.accessToken)}});case 21:return e.next=23,e.sent.json();case 23:if(void 0!==(h=e.sent).albums.items[0]){e.next=27;break}return document.getElementById("calculatedScore").innerHTML="Album not found.",e.abrupt("return");case 27:return p=h.albums.items[0].id,e.next=30,fetch("".concat(n).concat(p),{headers:{Authorization:"Bearer ".concat(m.accessToken)}});case 30:return e.next=32,e.sent.json();case 32:b=e.sent,f=[],E=Object(u.a)(b.tracks.items);try{for(E.s();!(g=E.n()).done;)v=g.value,f.push(v.id)}catch(i){E.e(i)}finally{E.f()}return d={ids:f},e.next=39,fetch("".concat(r).concat(new URLSearchParams(d)),{headers:{Authorization:"Bearer ".concat(m.accessToken)}});case 39:return e.next=41,e.sent.json();case 41:for(y=e.sent,k=0,w=0,S=b.tracks.items,x=0;x<S.length;x++)y[x]&&(k=k+=S[x].duration_ms),w+=S[x].duration_ms;isNaN(Math.round(k/w))?document.getElementById("calculatedScore").innerHTML="":document.getElementById("calculatedScore").innerHTML="Album rating: ".concat(Math.round(k/w*10)/2," out of 5"),e.next=53;break;case 49:e.prev=49,e.t0=e.catch(17),console.error(e.t0),document.getElementById("calculatedScore").innerHTML="Something bad happened. Please logout and log in to refresh the authentication.";case 53:case"end":return e.stop()}}),e,this,[[17,49]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.auth0,t=e.isAuthenticated,a=e.logout,n=e.loginWithRedirect;return r.a.createElement("div",null,t?r.a.createElement("div",null,r.a.createElement("div",{style:{float:"left"}},r.a.createElement("label",{htmlFor:"artistname"},"Artist: "),r.a.createElement("input",{type:"text",id:"artist",name:"artistname"})),r.a.createElement("div",{style:{float:"right"}},r.a.createElement("button",{onClick:function(){return a({returnTo:window.location.origin+window.location.pathname})}},"Logout")),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"left"}},r.a.createElement("label",{htmlFor:"albumname"},"Album: "),r.a.createElement("input",{type:"text",id:"album",name:"albumname"})),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.calculate},"Calculate!"),r.a.createElement("h3",{id:"calculatedScore"})):r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return n()}},"Login")))}}]),a}(r.a.Component),g=Object(f.b)(E);var v=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Album Rater"),r.a.createElement("hr",null),r.a.createElement(g,null),r.a.createElement("hr",null),r.a.createElement("p",null,"Made by ",r.a.createElement("a",{href:"http://matthewjenkins97.github.io"},"Matthew R. Jenkins")," in 2021. Application uses ",r.a.createElement("a",{href:"https://reactjs.org/"},"React")," and CSS from ",r.a.createElement("a",{href:"http://bettermotherfuckingwebsite.com/"},"bettermotherfuckingwebsite.com"),"."),r.a.createElement("p",null,"Note that this is still in development! If you encounter any bugs feel free to report them on my ",r.a.createElement("a",{href:"https://github.com/matthewjenkins97/SpotifyAlbumRater/issues"},"Github page"),"."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=a(17);o.a.render(r.a.createElement(y.a,{basename:"/SpotifyAlbumRater"},r.a.createElement(f.a,{domain:"dev-06brcesa.us.auth0.com",clientId:"aExrjSgZXrCRZAcUVZ9Ol6w2P3nBkrue",redirectUri:window.location.origin+window.location.pathname,audience:"https://dev-06brcesa.us.auth0.com/api/v2/",scope:"read:current_user read:user_idp_tokens offline_access"},r.a.createElement(v,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.d202cd90.chunk.js.map